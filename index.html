<!DOCTYPE html>
<html>
  <head>
    <link href="img/favicon.ico" rel="icon" type="image/x-icon"/>
    <title>X-Wings Miniature Squad Benchmark and squad builder</title>
    <meta name="description" content="Web app for X-Wings Miniature game">
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <meta name=viewport content="width=device-width, initial-scale=1">
    <script src="snap.svg-min-0.4.1.js"></script>
    <script src="jwerty.js"></script>
    <script src="jquery-1.11.2.js"></script>
    <script src="svg-pan-zoom.min.js"></script>
    <link rel="stylesheet" href="xwings.css">
    <script src="obstacles.js"></script>
    <script src="critical.js"></script>
    <script src="units.js"></script>
    <script src="iaunits.js"></script>
    <script src="pilots.js"></script>
    <script src="upgrades.js"></script>
    <script src="team.js"></script>
    <script src="xwings.js"></script>
    <script src="translations.js"></script>
    <script src="xws.js"></script>
    <script src="buzz.min.js"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-63149795-1', 'auto');
  ga('send', 'pageview');

</script>
  </head>

  <body lang="en">
    <nav>
      <span class="h2">X-Wings Squadron Benchmark<span class="ver"></span></span><div style="font-size:small;">
      <ul>
	<li><a href="#about">About</a></li>
	<li><a href="#proba" id="showproba">Probabilities</a></li>
	<li><a href="http://xws-benchmark.blogspot.fr">Bug report</a></li>
	<li><a href="#help">Help</a></li>
	<li><a href="#credit">Credits</a></li>
	<li><a href="#">Phase:<span id="phase">Setup</span></a><button id="np" class="nextphase" onclick="nextphase()">Next phase <span id='npimg'>&#9658;</span></button></li>
	<li><button class="permalink" onclick="permalink()">Save</button>
	<li><button class="permalink" onclick="resetlink()">Reset</button>
      </ul></div>
    </nav>

    <aside id="leftpanel">
      <section id="team1" class="team"></section>
    </aside>

    <aside id="rightpanel">
      <section id="team2" class="team"></section>
    </aside>
    
    <article id="main">
      <section class="phasepanel">
	<div id="positiondial" class="table">
	  <div>
	    <div onclick="activeunit.turn(-45)" title="key: <T>" class="symbols">4</div>
	    <div onclick="activeunit.turn(45)" title="key: <t>" class="symbols">6</div>
	  </div>
	  <div>
	    <div onclick="activeunit.turn(-5)" title="key: <B>" class="symbols">7</div>
	    <div onclick="activeunit.turn(5)" title="key: <b>" class="symbols">9</div>
	  </div>
	</div>
	<div id="maneuverdial" class="table"></div>
	<div id="activationdial" class="table"></div>
	<div id="actiondial" class="table"></div>
	<div id="attackdial" class="table"></div>
	<div id="combatdial">
	  <table style='width:100%'>
	    <tr style='width:100%' id="attack"></tr>
	    <tr style='width:100%' id="defense"></tr>
	  </table>
	  <div id="atokens"></div>
	  <div id="dtokens"></div>
	</div>
      </section>
      
      <section id="playmat">
	<svg id="svgout"></svg>
      </section>

      <section id="modal" class="modalDialog">
	<div>
	  <a href="#close" title="Close" class="close">X</a>
	  <h2 id="listtitle">List of all units</h2>

	  <div id="listunits" style="font-size:small" class="table"></div>
	</div>
      </section>
      
      <section class="info"></section>

      <section id="combatmodal" class="modalDialog">
	<div>
	  <h2>Combat</h2>
	</div>
      </section>


      <section id="import" class="modalDialog">
	<div>
	  <a href="#" title="Close" class="close">X</a>
	  <h2>Import a squadron</h2>
	  <p>Copy and paste the squad list using XWS format into the following area. (This is in beta, and the <a href="https://github.com/elistevens/xws-spec">XWS spec</a> is still being defined).</p>
	  <div>
	    <textarea id="jsonimport" rows="15" cols="45"></textarea>
	  </div>
	  <a href="#" onclick="TEAMS[currentteam].parseJSON(s,$('#jsonimport').val())" class="button2">Import</a>
	</div>
      </section>

      <section id="export" class="modalDialog">
	<div>
	  <a href="#" title="Close" class="close">X</a>
	  <h2>Export a squadron</h2>
	  <p>Copy and paste this into an XWS-compliant application to transfer your list. </p>
	  <div>
	    <textarea id="jsonexport" rows="15" cols="45"></textarea>
	  </div>
	</div>
      </section>

      <section id="help" class="modalDialog">
	<div class="help">
	  <a href="#" title="Close" class="close">X</a>
	  <h2>How to play</h2> 
	  <p>In X-Wings Squadron benchmark, you first have to build 2
	  squadrons, or import them in JSON format, before the
	  combat. You can also export your squads in the same
	  format. You can decide which side you are going to play
	  (human player) and which side is for the simple IA (computer
	  player). Both sides can be played by IA or by you. </p>

	  <p>The game area is decomposed into several zones. The top
	    menu presents actions available at all time. The left
	    toolbar describes the selected unit and the current game
	    phase controls. The center area is where the game takes
	    place. It has a size corresponding to a 90cmx90cm area (normal size area) at the scale of the ships. You can select a unit by clicking on it on the
	    center area or on its left/right description.</p>

	  <p>The top menu has a <b>Show probabilities</b> entry. It gives a table with the rows
	    corresponding to the number of attack dices, columns to the
	    number of defense dices. Each cell gives the percentage to
	    hit for this combination of attack and defense dices, the
	    color of the cell is red when it is over 50%, green
	    otherwise. It also provides, when the attack hits, the mean
	    number of hits and the mean number of criticals. The table
	    is computed online, and the probabilities given a number of
	    dices, for any combination of focus, hit, critical, blank
	    are computed. The table summarizes these values. By
	    selecting one of the tokens for the attacker/defender on the
	    top of the table, you can see the impact of these tokens or
	    rerolls on the probabilities. 

	    <h2>Squad building</h2> In this phase, only the left then
	    right panels are activated. You first select the kind of
	    ship, then the pilot and its upgrades. All pilots upto
	    wave 6 are available, but the EPIC format is not handled
	    (no huge ships).
	    The controls to create a squad should be straightforward. When the first squad is built, press the red button "Next Phase" to build the second one.

	    When both squads are built, press again the red button to
	    start the combat !
	  
	  <h2>Combat</h2> The left/right panels display the
	  characteristics of selected unit: Name of the pilot, type of
	  ship, in the top corner:pilot skill. For each weapon, you
	  can click on its power to toggle its range. Weapons are in
	  bright red when a target is in range, dark red
	  otherwise. When you click on the pilot agility, it toggles
	  range display.  Shields and hulls are vertical dots, in blue
	  and yellow resp.
	  
	  In the game area, the unit is represented with an
	  image <img alt="" style="float:left;width:20%;margin:10px;border:0;padding:0" src="img/unit-example.jpg">. The type of the ship
	  is represented with its firing arc. There are 4
	  lines of dots, and as many dots of a given color as the value to represent. The colors correspond to the following:
	    <b>Orange:</b> Skill of the pilot,
	    <b>Red:</b> Strength of the attack with the primary weapon,
	    <b>Green:</b> Agility of the ship,
	    <b>Blue and yellow:</b> Blue dots represent shields, yellow
	    are hull points. The total of the two values correspond to
	    the number of hits necessary to destroy the ship.

	  <h3>Combat Phases</h3> Each phase enable you to do some
	  actions. When done, press
	  the <span style='float:none;width:20px'
	  class='nextphase'>Next phase</span> button.

	    <p><b>1- Setup phase:</b> You can drag units around and use
	      the buttons in the left panel to turn them (including obstacles). This is
	      not checked, but your units should not overlap obstacles
	      or other units.</p>

	    <p><b>2- Planning phase:</b> Select any unit and pick one
	      maneuver available in the dial. Some maneuver may be
	      automatically disabled, for instance red maneuvers when
	      stressed. When all units have been assigned a maneuver,
	      you can move to the next phase. You cannot pick maneuver for IA played units.</p>

	    <p><b>3- Activation phase:</b> The first unit selected is
	      one of the unit with the lowest pilot skill. You can still select
	      manually any unit, but it is not possible to activate it
	      if it is not its turn. Activation is done by pressing
	      the "Move" button. Units are then
	      moved according to the template of the selected maneuver
	      (the template is not displayed). Collisions with
	      obstacles and other units are automatically handled. You
	      can then select one of the available action (or none),
	      pressing the corresponding button. If there was a collision while performing the
	      maneuver, no action is possible for this unit. If the
	      action requires to select a new position (roll) or a
	      target unit, possible positions are highlighted. Select
	      one to complete the action. 

	    <p><b>4- Combat phase:</b> Units are automatically activated
	      by decreasing pilot skill. You
	      can still select any unit manually but it cannot fire if
	      it is not its turn. If there is no unit in range or if
	      the selected unit overlaps an obstacle, this unit cannot
	      fire. To fire a unit, press the corresponding weapon icon near the unit and then the target unit (among those highlighted). 
A window opens showing the rolls for the attacker and its target.You can play any modifying roll/reroll or use tokens by clicking on them. When done, press "ok". </p>
	 
	  <p>The cleanup phase is here automatically done (removing
	  unused tokens). After the combat phase, a new round starting
	  with planning begins. When all units of a team are destroyed, the game stops. 
	  To start a new game, just reload the page !</p>
	</div>
      </section>
	

      <section id="proba" class="modalDialog">
	<div>
	  <a href="#" title="Close" class="close">X</a>
	  <h2>Probabilities in combat</h2>
	  <div>
	      <table style="border:1px">
		<tr><td>Attacker</td><td>Defender</td></tr>
		<tr>
		  <td><input type="checkbox" onclick="fillprobatable()" id="focusA" value="focus">
		    <label for="focusA" class="focustoken"></label>
		    <input type="checkbox" onclick="fillprobatable()" id="targetA" value="target">
		    <label for="targetA" class="targettoken"></label>
		    <input type="number" min=0 max=5 step=1 style="width:2em" onchange="fillprobatable()" id="rerollA" value="0">rerolls
		  </td>
		  <td><input type="checkbox" onclick="fillprobatable()" id="focusD" value="focus">
		    <label for="focusD" class="focustoken"></label>
		    <input type="checkbox" onclick="fillprobatable()" id="evadeD" value="evade">
		    <label for="evadeD" class="evadetoken"></label>
		    <input type="checkbox" onclick="fillprobatable()" id="cloakD" value="0">
		    <label for="cloakD" class="cloaktoken"></label>
		    <input type="number" min=0 max=5 step=1 style="width:2em" onchange="fillprobatable()"  id="rerollD" value="0">rerolls
		  </td>
		</tr>
	      </table>
	    <table id="probatable">  
	    </table>
	  </div>
	</div>
      </section>
      
      <section id="about" class="modalDialog">
	<div>
	  <a href="#" title="Close" class="close">X</a>
	  <h2>About</h2> X-Wings Squadron Benchmark is a web app for
 testing squadrons built for the X-Wing miniature game. You can design
 your squads and simulate a battle between them. Both sides can be
 controlled either by the player or by an simple AI. The user moves
 the different units and can try new strategies, squadron composition,
 maneuvers and placement. It can be used to build scenarios, benchmark
 against squads you can find in competition, try new ships or
 pilots...  The app offers the following features:
<ul>
<li>Import/Export your squads using JSON format</li>
<li>Move units and perform their actions as in the real game. All ship maneuver dials and of all actions in their bars are handled.</li>
<li>Detection of collisions with other ships and asteroids, automatic handling of stress, action and combat effects, rolling hit dice for possible damage automatically.</li>
<li>Automatic handling of a number of card effects (pilots, upgrades, ...). Biggs for instance is the unique possible target when in range of a ennemy. Howlrunner effect is automatically taken into account. A console provides feed back on what happens and which effect is triggered.</li>
<li>Combat is as simple as selected a target, and using tokens. Dices are rolled, damages and criticals are delivered automatically, shields are used, ...</li> 
<li>Assess the probabilities to hit, to kill, the mean number of hits and criticals a unit can deliver, at any time and taking into account range, tokens, card effects.</li>
<li>A simple AI ! It can move the units around and tries to fire at your units. It is simple to outmaneuver it but still, be careful not to be too confident :-) </li>
</ul>

The app is not really a game since the user plays both sides, there is no multi-player version of the app and there will not be. This is in no way a substitute for the real game but is a complementary tool. 
	</div>
      </section>

      <section id="credit" class="modalDialog">
	<div>
	  <a href="#" title="Close" class="close">X</a>
	  <h2>Credits and disclaimer</h2> 

	  The app is based on the vector fonts provided
	  by <a href="https://github.com/geordanr/xwing-miniatures-font">Xwing-miniatures-font</a>
	  (see License thereafter).
	  The <a href="https://github.com/elistevens/xws-spec">JSON
	  format of X-Wings squadrons</a> provides the list of all
	  ships, pilots, upgrades and several translations.

	  The sounds of space ships, lasers and explosions come from <a href="http://www.sa-matra.net/sounds/starwars/">Sa-Matra</a> website. Thanks !

	  The code of the app relies on <a href="http://snapsvg.io/">Snap</a> for SVG and <a href="https://jquery.com/">jQuery</a>. See their websites for the licenses. 

	  <p><b>Disclaimer</b></p>
	  <p>
	    X-Wing: The Miniatures Game is a trademark of Fantasy
	    Flight Games. This site is not endorsed by Fantasy Flight
	    Games, Lucasfilm Ltd. or Twentieth Century Fox and is
	    intended for entertainment and information purposes
	    only. Star Wars, the Star Wars logo, all names and
	    pictures of Star Wars characters, vehicles and any other
	    Star Wars related items are registered trademarks and/or
	    copyrights of Lucasfilm Ltd., or their respective
	    trademark and copyright holders. This site in no way
	    constitutes a threat to any trademark or intellectual
	    property. This web app is not-for-profit and is only
	    intended for use by fans of the game line.
	  </p>
	  
	  <p><b>Xwing-miniatures-font license</b></p> 
	  <p>The MIT License (MIT)</p>
	  <p>Copyright (c) 2014 Geordan Rosario</p>
	  <p>Permission is hereby granted, free of charge, to any person obtaining a copy
	    of this software and associated documentation files (the "Software"), to deal
	    in the Software without restriction, including without limitation the rights
	    to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
	    copies of the Software, and to permit persons to whom the Software is
	    furnished to do so, subject to the following conditions:
	    The above copyright notice and this permission notice shall be included in
	    all copies or substantial portions of the Software.
	    THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
	    IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
	    FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
	    AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
	    LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
	    OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
	    THE SOFTWARE.
	  </p>
	</div>
      </section>
    </article>
    <footer id='log'>
    </footer>
  </body>
</html>

