<!DOCTYPE html>
<html>
  <head>
    <title>X-Wings Miniature Squad Builder and Benchmark tool</title>
    <meta name="description" content="Web app for X-Wings Miniature game">
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8"> 
    <script src="snap.svg.js"></script>
    <script src="jwerty.js"></script>
    <script src="jquery-1.11.2.js"></script>
   <link rel="stylesheet" href="xwings.css">
    <script src="obstacles.js"></script>
    <script src="units.js"></script>
    <script src="pilots.js"></script>
    <script src="upgrades.js"></script>
    <script src="team.js"></script>
    <script src="xwings.js"></script>
    <script src="translations.js"></script>
    <script src="xws.js"></script>
    <script src="buzz.min.js"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-63149795-1', 'auto');
  ga('send', 'pageview');

</script>
  </head>

  <body lang="en">

    <nav>
      <span class="h2">X-Wings Squadron Benchmark<span style="font-size:x-small">v0.4</span></span><div style="font-size:small;">
      <ul>
	<li><a href="#about">About</a></li>
	<li><a href="#proba" id="showproba">Show probability tables</a></li>
	<li><a href="http://xws-benchmark.blogspot.fr">Bug report/Forum</a></li>
	<li><a href="#help">Help</a></li>
	<li><a href="#credit">Credits</a></li>
      </ul></div>
    </nav>

    <aside id="leftpanel">
      <section id="team1" class="team"></section>
    </aside>

    <aside id="rightpanel">
      <section id="team2" class="team"></section>
    </aside>
    
    <article>
      <section class="phasepanel">
	<div id="positiondial" class="table">
	  <div>
	    <div onclick="activeunit.turn(-45)" title="key: <T>" class="symbols">4</div>
	    <div onclick="activeunit.turn(45)" title="key: <t>" class="symbols">6</div>
	  </div>
	  <div>
	    <div onclick="activeunit.turn(-5)" title="key: <B>" class="symbols">7</div>
	    <div onclick="activeunit.turn(5)" title="key: <b>" class="symbols">9</div>
	  </div>
	</div>
	<div id="maneuverdial" class="table"></div>
	<button id="move" onclick="applymaneuver()">Move</button>
	<div id="actiondial" class="table"></div>
	<div id="attackdial" class="table"></div>
      </section>
      
      <section id="playmat">
	<svg id="svgout"></svg>
      </section>

      <section id="modal" class="modalDialog">
	<div>
	  <a href="#close" title="Close" class="close">X</a>
	  <h2 id="listtitle">List of all units</h2>

	  <div id="listunits" style="font-size:small" class="table"></div>
	</div>
      </section>
      
      <section class="info"></section>

      <section id="combatmodal" class="modalDialog">
	<div>
	  <h2>Combat</h2>
	  <table>
	    <tr><td id="attacker"></td><td id="atokens"></td><td id="attack"></td></tr>
	    <tr><td id="defender"></td><td id="dtokens"></td><td id="defense"></td></tr>
	  </table>
	  <button title="key: <enter>" onclick="resolvedamage();" class="bigbutton">Ok</button>
	</div>
      </section>


      <section id="import" class="modalDialog">
	<div>
	  <a href="#" title="Close" class="close">X</a>
	  <h2>Import a squadron</h2>
	  <p>Copy and paste the squad list using XWS format into the following area. (This is in beta, and the <a href="https://github.com/elistevens/xws-spec">XWS spec</a> is still being defined).</p>
	  <div>
	    <textarea id="jsonimport" rows="15" cols="45"></textarea>
	  </div>
	  <a href="#" onclick="TEAMS[currentteam].parseJSON(s,$('#jsonimport').val())" class="button2">Import</a>
	</div>
      </section>

      <section id="export" class="modalDialog">
	<div>
	  <a href="#" title="Close" class="close">X</a>
	  <h2>Export a squadron</h2>
	  <p>Copy and paste this into an XWS-compliant application to transfer your list. </p>
	  <div>
	    <textarea id="jsonexport" rows="15" cols="45"></textarea>
	  </div>
	</div>
      </section>

      <section id="help" class="modalDialog">
	<div class="help">
	  <a href="#" title="Close" class="close">X</a>
	  <h2>How to play</h2> 
	  <p>In X-Wings Squadron benchmark, you play
	    one squadron against another one. These squadrons can be
	    imported from a Squadron builder tool, freely available
	    online. Both sides of the combat are played by you (no human
	    or computer opponent). The computer helps you by taking into
	    account the rules automatically, moving the units arounds
	    according to their maneuvers and actions, detecting
	    collisions, and rolling dices for combat. The objective is
	    to be able to play quickly and try new combination, planning
	    or strategies. The tool provides accurate to hit
	    probability computation, for all situations, including
	    chance to have a critical.</p>

	  <p>The game area is decomposed into several zones. The top menu
	    presents actions available at all time. The left toolbar describes
	    the selected unit and the current game
	    phase controls. The center area is where the game takes place. You
	    can always select a unit by clicking on it.</p>
	  <h3>Top Menu</h3>
	  <p><b>Import...:</b> You can import squadrons built with
	    online squadron builders, using a JSON description. The app
	    does not support units in EPIC mode and will ignore
	    them. Normally, all upgrades and units in the standard
	    format are accepted, even if their effect is not always
	    effective.</p>
	  <p><b>List all units:</b> Provides the table of all alive
	    units in the field, with their characteristics and point
	    cost. Tokens
	    are <b class="xfocustoken"></b> focus, <b  class="xevadetoken"></b>
	    evade, <b  class="xtargettoken"></b>blue
	    target lock, <b  class="xstresstoken"></b> stress,
	    and <b  class="xcloaktoken"></b> cloak tokens. No action can
	    be taken from this table.
	  <p><b>Show probabilities:</b> Gives a table with the rows
	    corresponding to the number of attack dices, columns to the
	    number of defense dices. Each cell gives the percentage to
	    hit for this combination of attack and defense dices, the
	    color of the cell is red when it is over 50%, green
	    otherwise. It also provides, when the attack hits, the mean
	    number of hits and the mean number of criticals. The table
	    is computed online, and the probabilities given a number of
	    dices, for any combination of focus, hit, critical, blank
	    are computed. The table summarizes these values. By
	    selecting one of the tokens for the attacker/defender on the
	    top of the table, you can see the impact of these tokens or
	    rerolls on the probabilities. Note that when you increase
	    the % to hit by using a <b class="xfocustoken"></b> token,
	    the mean number of critical decreases. This is normal, the
	    probability to have a critical stays the same and as the
	    probability to land a hit increases, the mean value computed
	    for all cases of hits/crits decreases.
	  
	  <h3>Unit description</h3> 	  
	  The left panel displays the characteristics of selected unit: Name of the pilot, type of ship, 
	  <p class='statskill'>5</p><p class='statfire'>3</p><p class='statevade'>2</p><p class='stathull'>2</p><p class='statshield'>2</p>
	  representing respectively the pilot skill, fire power,
	  evasion, hull and shields of the unit, text of the special
	  capacity and then the list of tokens and upgrades.
	  
	  In the game area, the unit is represented with an
	  image <img alt="" style="float:left;width:20%;margin:10px;border:0;padding:0" src="img/unit-example.jpg">. The type of the ship
	  is represented with its firing arc. There are 4
	  lines of dots, and as many dots of a given color as the value to represent. The colors correspond to the following:
	    <b>Orange:</b> Skill of the pilot,
	    <b>Red:</b> Strength of the attack with the primary weapon,
	    <b>Green:</b> Agility of the ship,
	    <b>Blue and yellow:</b> Blue dots represent shields, yellow
	    are hull points. The total of the two values correspond to
	    the number of hits necessary to destroy the ship.

	  These values are updated during play. 

	  <h3>Phase actions</h3> Each phase enable you to do some
	  actions. When done, press
	  the <span style='float:none;width:20px'
	  class='nextphase'>Next</span> button.

	    <p><b>1- Setup phase:</b> You can drag units around and use
	      the buttons in the left panel to turn them (including obstacles). This is
	      not checked, but your units should not overlap obstacles
	      or other units.</p>

	    <p><b>2- Planning phase:</b> Select any unit and pick one
	      maneuver available in the dial. Some maneuver may be
	      automatically disabled, for instance red maneuvers when
	      stressed. When all units have been assigned a maneuver,
	      you can move to the next phase.</p>

	    <p><b>3- Activation phase:</b> The first unit selected is
	      one of the unit with the lowest pilot skill. Moving
	      through units, with the arrows or using tab/shift+tab
	      keys will select only units that you can activate (from
	      lower skill to higher skill). You can still select
	      manually any unit, but it is not possible to activate it
	      if it is not its turn. Activation is done by pressing
	      the corresponding button or enter key. Units are then
	      moved according to the template of the selected maneuver
	      (the template is not displayed). Collisions with
	      obstacles and other units are automatically handled. You
	      can then select one of the available action (or none),
	      pressing the corresponding button multiple time, "ok"
	      when done. If there was a collision while performing the
	      maneuver, no action is possible for this unit. If the
	      action requires to select a new position (roll) or a
	      target unit, possible positions are highlighted. Select
	      one to complete the action. 

	    <p><b>4- Combat phase:</b> Units are automatically activated
	      by decreasing pilot skill and you can move through ready
	      to fire units with tab/shift+tab keys or the arrows. You
	      can still select any unit manually but it cannot fire if
	      it is not its turn. If there is no unit in range or if
	      the selected unit overlaps an obstacle, this unit cannot
	      fire. To fire a unit, press the corresponding button or
	      the w key. A window opens showing the different possible
	      target units (with their range), with the probabilities
	      to hit, and when there is a hit, mean value of hit and
	      mean value of critical. These values take into account
	      tokens of the units, assuming they will be used (agility,
	      focus for the defender, focus and blue target lock token if it
	      corresponds to the target unit for the attacker). If
	      different weapons are available, there is one line per
	      weapon. Some weapons require special conditions to be
	      fired (requiring targeting or focusing). If the conditions
	      are not met, the line for this weapon is not
	      displayed. When you fire a weapon, another window,
	      showing the attacking and defending units is presented,
	      with the result of the roll for this attack. You can
	      modify/add dices by clicking on the tokens, on the right
	      of the units. Remember you play both sides at the same
	      time !  When you are done, press ok.</p>
	 
	  <p>The cleanup phase is here automatically done (removing
	  unused tokens). After the combat phase, a new round starting
	  with planning begins. There is no end game condition. To
	  start a new game, just reload the page !</p>
	</div>
      </section>
	

      <section id="proba" class="modalDialog">
	<div>
	  <a href="#" title="Close" class="close">X</a>
	  <h2>Probabilities in combat</h2>
	  <div>
	      <table style="border:1px">
		<tr><td>Attacker</td><td>Defender</td></tr>
		<tr>
		  <td><input type="checkbox" onclick="fillprobatable()" id="focusA" value="focus">
		    <label for="focusA" class="focustoken"></label>
		    <input type="checkbox" onclick="fillprobatable()" id="targetA" value="target">
		    <label for="targetA" class="targettoken"></label>
		    <input type="number" min=0 max=5 step=1 style="width:2em" onchange="fillprobatable()" id="rerollA" value="0">rerolls
		  </td>
		  <td><input type="checkbox" onclick="fillprobatable()" id="focusD" value="focus">
		    <label for="focusD" class="focustoken"></label>
		    <input type="checkbox" onclick="fillprobatable()" id="evadeD" value="evade">
		    <label for="evadeD" class="evadetoken"></label>
		    <input type="checkbox" onclick="fillprobatable()" id="cloakD" value="0">
		    <label for="cloakD" class="cloaktoken"></label>
		    <input type="number" min=0 max=5 step=1 style="width:2em" onchange="fillprobatable()"  id="rerollD" value="0">rerolls
		  </td>
		</tr>
	      </table>
	    <table id="probatable">  
	    </table>
	  </div>
	</div>
      </section>
      
      <section id="about" class="modalDialog">
	<div>
	  <a href="#" title="Close" class="close">X</a>
	  <h2>About</h2> X-Wings Squadron Benchmark is a web app for
 testing squadrons built for the X-Wing miniature game. The user moves
 the different units and can try new strategies, squadron composition,
 maneuvers and placement. It can be used to build scenarios, benchmark
 against squads you can find in competition, try new ships or
 pilots...  The app offers the following features:
<ul>
<li>Import your squads built with your preferred X-Wings squadron builder</li>
<li>Move units and perform their actions as in the real game. All ship maneuver dials and of all actions in their bars are handled. The app automatically sets/removes stress tokens according to the maneuver selected.</li>
<li>Detection of collisions with other ships and asteroids, automatic handling of stress, action and combat effects, rolling hit dice for possible damage automatically.</li>
<li>Automatic handling of a number of card effects (pilots, upgrades, ...). Biggs for instance is the unique possible target when in range of a ennemy. Howlrunner effect is automatically taken into account. A console provides feed back on what happens and which effect is triggered.</li>
<li>Combat is as simple as selected a target, and using tokens. Dices are rolled, damages and criticals are delivered automatically, shields are used, ...</li> 
<li>Assess the probabilities to hit, to kill, the mean number of hits and criticals a unit can deliver, at any time and taking into account range, tokens, card effects.</li>
</ul>

The app is not really a game since the user plays both sides, there is no multi-player version of the app and there will not be. This is in no way a substitute for the real game but is a complementary tool. 
	</div>
      </section>

      <section id="credit" class="modalDialog">
	<div>
	  <a href="#" title="Close" class="close">X</a>
	  <h2>Credits and disclaimer</h2> 

	  The app is based on the vector fonts provided
	  by <a href="https://github.com/geordanr/xwing-miniatures-font">Xwing-miniatures-font</a>
	  (see License thereafter).
	  The <a href="https://github.com/elistevens/xws-spec">JSON
	  format of X-Wings squadrons</a> provides the list of all
	  ships, pilots, upgrades and several translations.

	  The sounds of space ships, lasers and explosions come from <a href="http://www.sa-matra.net/sounds/starwars/">Sa-Matra</a> website. Thanks !

	  The code of the app relies on <a href="http://snapsvg.io/">Snap</a> for SVG and <a href="https://jquery.com/">jQuery</a>. See their websites for the licenses. 

	  <p><b>Disclaimer</b></p>
	  <p>
	    X-Wing: The Miniatures Game is a trademark of Fantasy
	    Flight Games. This site is not endorsed by Fantasy Flight
	    Games, Lucasfilm Ltd. or Twentieth Century Fox and is
	    intended for entertainment and information purposes
	    only. Star Wars, the Star Wars logo, all names and
	    pictures of Star Wars characters, vehicles and any other
	    Star Wars related items are registered trademarks and/or
	    copyrights of Lucasfilm Ltd., or their respective
	    trademark and copyright holders. This site in no way
	    constitutes a threat to any trademark or intellectual
	    property. This web app is not-for-profit and is only
	    intended for use by fans of the game line.
	  </p>
	  
	  <p><b>Xwing-miniatures-font license</b></p> 
	  <p>The MIT License (MIT)</p>
	  <p>Copyright (c) 2014 Geordan Rosario</p>
	  <p>Permission is hereby granted, free of charge, to any person obtaining a copy
	    of this software and associated documentation files (the "Software"), to deal
	    in the Software without restriction, including without limitation the rights
	    to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
	    copies of the Software, and to permit persons to whom the Software is
	    furnished to do so, subject to the following conditions:
	    The above copyright notice and this permission notice shall be included in
	    all copies or substantial portions of the Software.
	    THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
	    IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
	    FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
	    AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
	    LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
	    OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
	    THE SOFTWARE.
	  </p>
	</div>
      </section>
    </article>
    <footer>
      <div><ul>
	<li><b>Active unit:</b></li>
	<li><button class="activeunit symbols" onclick="activeunit.togglehitsector()" >%</button></li>
	<li><button class="activeunit symbols" onclick="activeunit.togglerange()">S</button></li>
	<li><button class="activeunit symbols" onclick="inhitrange()">%CPM</button></li>
	<li style="float:right"><b>Active phase:</b> <b id="phase">Setup</b><button id="np" class="nextphase" onclick="nextphase()"> &#9658; </button></li>
      </ul></div>
      <div id='log'></div>
    </footer>
  </body>
</html>

